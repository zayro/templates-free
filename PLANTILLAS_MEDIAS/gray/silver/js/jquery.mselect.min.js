/*
 * jQuery mSelect Plugin 1.1 (15 avril 2010)
 * requires jQuery v1.4.2 or later
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Auteur : Samuel Mandonnaud <mandonnaud.s gmail com> http://www.le-pret-a-surfer.com
 */
 (function(a){a.fn.mSelect=function(b){var c=a.extend({},a.fn.mSelect.defaults,b);a(this).each(function(){if(!a(this).is("select")&&!a(this).is("ul")){a.fn.mSelect.debug('Seul les Ã©lÃ©ments "select" et "ul" sont acceptÃ© : '+this);return}var d="";if(a(this).is("select")&&a(this).attr("name")){d=a(this).attr("name")}else{if(a(this).children("li").children("input[type=radio]").attr("name")){d=a(this).children("li").children("input[type=radio]").attr("name")}}if(d==""){d="mSelect"+Math.random()}var e="";if(a(this).attr("id")){var e='id = "'+a(this).attr("id")+'" '}a(this).wrap('<div class="mSelect" '+e+' style="display:inline-block;" />');a(this).parent().append('<div class="mFleche"></div><div class="mSelected">'+c.defaut+"</div>");if(a(this).is("select")){a(this).children("option").each(function(){var h="";if(a(this).attr("value")){h=a(this).attr("value")}else{h=a(this).html()}var g="";if(a(this).attr("class")){g=" "+a(this).attr("class")}var f="";if(a(this).attr("selected")){f='checked="checked" ';a(this).parent().parent().children(".mSelected").html(a(this).html())}a(this).parent().parent().append('<div class="mOption'+g+'"><input type="radio" '+f+'value="'+h+'" class="mRadio" name="'+d+'" />'+a(this).html()+"</div>")})}else{a(this).children("li").each(function(){if(!a(this).children("input[type=radio]")){a.fn.mSelect.debug("Input Radio manquand");return}if(!a(this).children("label")){a.fn.mSelect.debug("Label manquand");return}var h="";if(a(this).children("input[type=radio]").attr("value")){h=a(this).children("input[type=radio]").attr("value")}else{h=a(this).children("label").text()}var g="";if(a(this).attr("class")){g=" "+a(this).attr("class")}var f="";if(a(this).children("input[type=radio]").attr("checked")){f='checked="checked" ';a(this).parent().parent().children(".mSelected").html(a(this).children("label").html())}a(this).parent().parent().append('<div class="mOption'+g+'"><input type="radio" '+f+'value="'+h+'" class="mRadio" name="'+d+'" />'+a(this).children("label").html()+"</div>")})}if(c.radioHide){a(this).parent().children(".mOption").children(".mRadio").hide()}a(this).parent().children(".mOption").css({cursor:"pointer",position:"absolute"}).hide().click(function(){a(this).parent().children(".mOption").children(".mRadio").removeAttr("checked");a(this).children(".mRadio").attr("checked","checked");a(this).parent().children(".mSelected").html(a(this).html());a(this).parent().children(".mSelected").children(".mRadio").remove();if(c.eventClick){c.eventClick.apply(this,[a(this).children(".mRadio").val(),a(this).parent().children(".mSelected").html()])}});a(this).parent().one("click",function(){a.fn.mSelect.clickOuvert(this,c)});a(this).remove()})};a.fn.mSelect.clickOuvert=function(e,c){var d=a(e).position();var b=d.left;var g=d.top+a(e).outerHeight();var f="";a(e).children(".mOption").each(function(){a(this).css({top:g,left:b}).fadeIn();g+=a(this).outerHeight();if(a(this).children("input")[0].checked){f=a(this).children("input").val()}});if(c.eventOpen){c.eventOpen.apply(e,[f,a(e).children(".mSelected").html()])}a(document).delay(1).queue(function(){a(this).clearQueue();a(this).one("click",function(){var h="";a(e).children(".mOption").each(function(){a(this).fadeOut();if(a(this).children("input")[0].checked){h=a(this).children("input").val()}});if(c.eventClose){c.eventClose.apply(e,[h,a(e).children(".mSelected").html()])}a(e).one("click",function(){a.fn.mSelect.clickOuvert(this,c)})})})};a.fn.mSelect.debug=function(b){if(window.console&&window.console.firebug){console.error("mSelect : "+b)}else{alert("mSelect : "+b)}};a.fn.mSelect.defaults={defaut:"",radioHide:true,eventClick:null,eventOpen:null,eventClose:null}})(jQuery);