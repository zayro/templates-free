package local.display{	import flash.display.Sprite;	import flash.display.MovieClip;	import flash.events.Event;		import elemental.utils.Elemath;		import local.display.Picture;		public class PictureStage extends Sprite	{		private static const maxX: int = 300;		private static const minX: int = -300;		private static const maxY: int = 100;		private static const minY: int = -200				public static var instance: PictureStage;				public var children: Array = new Array();		public var activity: MovieClip;				private var needLoaded: int = 0;		private var loaded: int = 0;				public function PictureStage() : void		{			instance = this;			addEventListener("COUNT", doneLoading);		}				public function populate(array: Array) : void		{			clear();						for each (var xml: XML in array)			{				var _x: int = Elemath.random(minX, maxX);				var _y: int = Elemath.random(minY, maxY);								addPicture(xml, _x, _y);			}						if (array.length > 0)				activity.show();		}				public function addPicture(xml: XML, _x: int, _y: int) : void		{			var pic: Picture = new Picture(xml, _x, _y);			children.push(pic);							pic.y = -1000;			addChild(pic);						needLoaded++;		}				public function clear() : void		{			loaded = 0;			needLoaded = 0;			activity.hide();						for each (var pic: Picture in children)				pic.clear();							children = new Array();		}				private function doneLoading(event: Event) : void		{			loaded++;			trace(loaded, needLoaded);						if (loaded >= needLoaded)				activity.hide();		}	}}