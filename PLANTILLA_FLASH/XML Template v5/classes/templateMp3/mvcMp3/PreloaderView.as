import templateMp3.util.*;
import templateMp3.mvc.*
import templateMp3.I.*
import templateMp3.mvcMp3.*;

/**
* ...
* @author Default
* @version 0.1
*/

class templateMp3.mvcMp3.PreloaderView extends AbstractView {

	
	var rectangle:MovieClip
	
	
	public function PreloaderView() {
		
	}
	
///////////////////////////////////////////////////////////////////////////////////////
	
  public function defaultController (model:Observable):Controller {
  return new PreloaderController(model)
 }
 
///////////////////////////////////////////////////////////////////////////////////////

function onLoad(){
	this.onResize()
	var m:Mp3Model=Mp3Model(this.getModel())
	this.setColor(this.rectangle,m.MP3_PRELOADER_COLOR)
	this.rectangle._width=0
}

//////////////////////////////////////////////////////////////////////////////////////////////////

function setColor(mc_,color_){
	var k:Color=new Color(mc_)
	k.setRGB(color_)
}

//////////////////////////////////////////////////////////////////////////////////////////////////

function onResize(){
	var m:Mp3Model=Mp3Model(this.getModel())
	this._x=0
	this._y=0
	this.progress()
}

//////////////////////////////////////////////////////////////////////////////////

function onSetSize(){
	this.progress()	
}

////////////////////////////////////////////////////////////////////////////////////

function progress(){
	var m:Mp3Model=Mp3Model(this.getModel())
	var l=m.__sound.getBytesLoaded()
	var t=m.__sound.getBytesTotal()
	var c=(l/t)
	var d=c*(m.width-580)
	this.rectangle._width = d
	
	
}

/////////////////////////////////////////////////////////////////////////

function onProgressLoad(obj){
	this.progress()
}

/////////////////////////////////////////////////////////////////////////////////////

function onChangedCurrent(){
	this.rectangle._width=0
}

////////////////////////////////////////////////////////////////////////////////////

function onPlay(){
	var m:Mp3Model=Mp3Model(this.getModel())
}

/////////////////////////////////////////////////////////////////////////////////////

function onStop(){
	
}

/////////////////////////////////////////////////////////////////////////////////

function onPause(){
	
}

//////////////////////////////////////////////////////////////////////////////////






	
}