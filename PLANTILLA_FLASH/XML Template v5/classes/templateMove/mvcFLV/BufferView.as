import templateMove.util.*;
import templateMove.mvc.*
import templateMove.I.*
import templateMove.mvcFLV.*;

class templateMove.mvcFLV.BufferView extends AbstractView {


	
var animation:MovieClip
var __oldPosition:Number
var __oldTimer:Number
var background:MovieClip
	
////////////////////////////////////////////////////////////////////////////////////////////////////////
	
public function defaultController (model:Observable):Controller {
  return new BufferController(model)
 }
 
/////////////////////////////////////////////////////////////////////////////////////////////////////// 
 
function BufferView(){
	
}

 ///////////////////////////////////////////////////////////////////////////////////////
 
 function onLoad(){
    this.onResize()
	//shov()
 }
 

/////////////////////////////////////////////////////////////////////////////////////////////////////

 function hide(){
	this.gotoAndStop(1)
 }
 
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 
 function shov(){
	  var m:FLVModel=FLVModel(this.getModel())
	 this.gotoAndStop(2)
	
	 NewColor.setColor(this.background,m.FLV_COLOR_BACKGROUND_BUFFER)
 }
 
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 
 function onProgress(){
	 var m:FLVModel=FLVModel(this.getModel())
	  if(m.stan=="play"){
		 if(getTimer()-__oldTimer>1200){
				onStepTime()
			    __oldTimer=getTimer()
		 }
	 }
 }
 
 ///////////////////////////////////////////////////////////////////////////////////////////
 
 function onStepTime(){
	 var m:FLVModel=FLVModel(this.getModel()) 
	 if(m.position!=__oldPosition){
		this.hide()
	 }else{
	     this.shov()
	 }
	 this.__oldPosition=m.position	 
 }
 
//////////////////////////////////////////////////////////////////////////////////////////
 
 function onStop(){
	 this.hide()	 
 }
 
 ///////////////////////////////////////////////////////////////////////////////////////
 
 function onStart() {
	// shov()
	 this.__oldTimer=getTimer()	 
 }
 
 ////////////////////////////////////////////////////////////////////////////////////////
 
 function onPauze(){
	 this.hide()	 
 }
 
////////////////////////////////////////////////////////////////////////////////////////	

function onResize(){
	 var m:FLVModel=FLVModel(this.getModel())
	 var target:FLV = FLV(m.__flv)
	 
	this._x=m.width/2-54/2
	this._y=m.height/2-m.__toolsHeight-48/2//m.height-m.__toolsHeight-this._height
}

//////////////////////////////////////////////////////////////////////////////////////////

function onBufferStop(){
	this.hide()
}

//////////////////////////////////////////////////////////////////////////////////////

function onBufferStart(){
	
	
}

////////////////////////////////////////////////////////////////////////////////
  
}